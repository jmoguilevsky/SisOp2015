#!/bin/bash
LLAMADAS_ACEPTADAS=$(ls -t $ACEPDIR/)
CODIGOS_PAIS=$MAEDIR/CdP.mae
CODIGOS_AREA=$MAEDIR/CdA.mae
CENTRALES=$MAEDIR/CdC.mae
AGENTES=$MAEDIR/agentes.mae
TIPOS_LLAMADAS=$MAEDIR/tllama.tab
UMBRALES=$MAEDIR/umbral.tab

DIR_LLAMADAS_SOSPECHOSAS=$PROCDIR
DIR_ARCHIVOS_PROCESADOS=$PROCDIR/proc
DIR_LLAMADAS_RECHAZADAS=$RECHDIR/llamadas/
RECH_EXT=".rech"
LOGCOM="AFUMB"


function log(){
	GraLog $LOGCOM $1 $2
	#echo $2
}

GraLog "Inicio de AFUMB" INFO 
#log $LOGCOM "Inicio de AFUMB" INFO 
#log $LOGCOM "Cantidad de archivos a procesar: $(ls $ACEPDIR/ | wc -l)" INFO
GraLog "Cantidad de archivos a procesar: $(ls $ACEPDIR/ | wc -l)" INFO


for i in $LLAMADAS_ACEPTADAS; do
	echo $DIR_ARCHIVOS_PROCESADOS$ACEPDIR/$i
	if [ ! -f $DIR_ARCHIVOS_PROCESADOS/$ACEPDIR/$i ]; then
    	log "Se rechaza el archivo por estar DUPLICADO"
    	MoverA $ACEPDIR/$i $RECHDIR
	else
		continue
		#MoverA $ACEPDIR/$i $DIR_ARCHIVOS_PROCESADOS
	fi
	#while IFS='' read -r line || [[ -n "$line" ]]; do
	#done < $ACEPDIR/$i
done

